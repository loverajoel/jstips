---
layout: post

title: Добавление элемента в массив
tip-number: 00
tip-username: loverajoel
tip-username-profile: https://github.com/loverajoel
tip-tldr: Добавление элемента в существуюший массив — повседневная задача. Элемент можно добавить в конец массива используя push, в начало с unshift, и в середину с splice.
tip-writer-support: https://www.coinbase.com/loverajoel

categories:
    - ru_RU
---


# Добавление элемента в существуюший массив

Добавление элемента в существуюший массив — повседневная задача. Элемент можно добавить в конец массива используя push, в начало с unshift, и в середину с splice.

Это широко известные нам методы, но это не значит, что нет более производительных способов. Погнали:

## Добавление элемента в конец

Добавление элемента в конец массива легко выполняется методом push(), но есть и другие способы.

```javascript

var arr = [1,2,3,4,5];
var arr2 = [];

arr.push(6);
arr[arr.length] = 6;
arr2 = arr.concat([6]);
```

Первые два метода изменяют оригинальный массив. Не верите мне? Проверьте [jsperf](http://jsperf.com/push-item-inside-an-array)

### Производительность на мобильных:

#### Android (v4.2.2)

1. _arr.push(6);_ и _arr[arr.length] = 6;_ одинаковая производительность // 3 319 694 оп/сек
3. _arr2 = arr.concat([6]);_ медленнее на 50.61 % предыдущих

#### Chrome Mobile (v33.0.0)

1. _arr[arr.length] = 6;_ // 6 125 975 оп/сек
2. _arr.push(6);_ медленнее на 66.74 %
3. _arr2 = arr.concat([6]);_ медленнее на 87.63 %

#### Safari Mobile (v9)

1. _arr[arr.length] = 6;_ // 7 452 898 оп/сек
2. _arr.push(6);_ медленнее на 40.19 %
3. _arr2 = arr.concat([6]);_ медленнее на 49.78 %

```javascript
Итог

1. arr[arr.length] = 6; // 5 632 856 оп/сек в среднем
2. arr.push(6); // медленнее на 35.64 %
3. arr2 = arr.concat([6]); // медленнее на 62.67 %
```

### Производительность на компьютерах

#### Chrome (v48.0.2564)

1. _arr[arr.length] = 6;_ // 21 602 722 оп/сек
2. _arr.push(6);_ медленнее на 61.94 %
3. _arr2 = arr.concat([6]);_ медленнее на 87.45 %

#### Firefox (v44)

1. _arr.push(6);_ // 56 032 805 оп/сек
2. _arr[arr.length] = 6;_ медленнее на 0.52 %
3. _arr2 = arr.concat([6]);_ медленнее на 87.36 %

#### IE (v11)

1. _arr[arr.length] = 6;_ // 67 197 046 оп/сек
2. _arr.push(6);_ медленнее на 39.61 %
3. _arr2 = arr.concat([6]);_ медленнее на 93.41 %

#### Opera (v35.0.2066.68)

1. _arr[arr.length] = 6;_ // 30 775 071 оп/сек
2. _arr.push(6);_ медленнее на 71.60 %
3. _arr2 = arr.concat([6]);_ медленнее на 83.70 %

#### Safari (v9.0.3)

1. _arr.push(6);_ // 42 670 978 оп/сек
2. _arr[arr.length] = 6;_ медленнее на 0.80 %
3. _arr2 = arr.concat([6]);_ медленнее на 76.07 %

```javascript
Итог

1. arr[arr.length] = 6; // со средней скоростью 42 345 449 оп/сек
2. arr.push(6); // медленнее на 34.66 %
3. arr2 = arr.concat([6]); // медленнее на 85.79 %
```

## Добавление элемента в начало

Теперь попробуем добавить элемент в начало массива:

```javascript
var arr = [1,2,3,4,5];

arr.unshift(0);
[0].concat(arr);
```
Немного больше информации: unshift модифицирует оригинальный массив; concat возвращает новый. [jsperf](http://jsperf.com/unshift-item-inside-an-array)

### Производительность на мобильных:

#### Android (v4.2.2)

1. _[0].concat(arr);_ // 1 808 717 оп/сек
2. _arr.unshift(0);_ медленнее на 97.85 %

#### Chrome Mobile (v33.0.0)

1. _[0].concat(arr);_ // 1 269 498 оп/сек
2. _arr.unshift(0);_ медленнее на 99.86 %

#### Safari Mobile (v9)

1. _arr.unshift(0);_ // 3 250 184 оп/сек
2. _[0].concat(arr);_ медленнее на 33.67 %

```javascript
Итог

1. [0].concat(arr); // со средней скоростью 4 972 622 оп/сек
2. arr.unshift(0); // медленнее на 64.70 %
```

### Производительность на компьютерах

#### Chrome (v48.0.2564)

1. _[0].concat(arr);_ // 2 656 685 оп/сек
2. _arr.unshift(0);_ медленнее на 96.77 %

#### Firefox (v44)

1. _[0].concat(arr);_ // 8 039 759 оп/сек
2. _arr.unshift(0);_ медленнее на 99.72 %

#### IE (v11)

1. _[0].concat(arr);_ // 3 604 226 оп/сек
2. _arr.unshift(0);_ медленнее на 98.31 %

#### Opera (v35.0.2066.68)

1. _[0].concat(arr);_ // 4 102 128 оп/сек
2. _arr.unshift(0);_ медленнее на 97.44 %

#### Safari (v9.0.3)

1. _arr.unshift(0);_ // 12 356 477 оп/сек
2. _[0].concat(arr);_ медленнее на 15.17 %

```javascript
Итог

1. [0].concat(arr); // со средней скоростью 6 032 573 оп/сек
2. arr.unshift(0); // медленнее на 78.65 %
```

## Добавление элемента в середину

В середину массива элемент можно добавить методом splice, и это самый производительный способ.

```javascript
var items = ['one', 'two', 'three', 'four'];
items.splice(items.length / 2, 0, 'hello');
```

Я запускал эти тесты в разных браузерах и ОС, и результаты были похожие. Надеюсь, эти советы окажутся вам полезны и вы начнете писать свои собственные тесты!
