---
layout: post

title: Ключи в дочерних компонентах важны
tip-number: 02
tip-username: loverajoel
tip-username-profile: https://github.com/loverajoel
tip-tldr: Key — аттрибут, который вы должны передавать всем компонентам, созданным динамически из массива. Это уникальный и постоянный id, который React использует для идентификации каждого компонента в DOM и узнает это другой компонент или тот же самый. Использование "ключей" гарантирует, что дочерний компонент "законсервирован" и не пересоздан, и уберегает от странных вещей, которые могут произойти.
tip-writer-support: https://www.coinbase.com/loverajoel

categories:
    - ru_RU
---

[Key](https://facebook.github.io/react/docs/multiple-components.html#dynamic-children) — аттрибут, который вы должны передавать всем компонентам, созданным динамически из массива. Это уникальный и постоянный id, который React использует для идентификации каждого компонента в DOM и узнает это другой компонент или тот же самый. Использование "ключей" гарантирует, что дочерний компонент "законсервирован" и не пересоздан, и уберегает от странных вещей, которые могут произойти.

> Ключи нужны не для производительности, a для идентичности (что выливается в лучшую производительность). Произвольно применяемые и изменяемые значения не формируют идентичность [Paul O’Shannessy](https://github.com/facebook/react/issues/1342#issuecomment-39230939)

- Используйте существующее уникальное значение объекта.
- Определяйте ключи в родительских компонентах, а не в дочерних.

```javascript
//плохо
...
render() {
	<div key={% raw %}{{item.key}}{% endraw %}>{% raw %}{{item.name}}{% endraw %}</div>
}
...

//Хорошо
<MyComponent key={% raw %}{{item.key}}{% endraw %}/>
```
- [Использование позиции в массиве как ключ — плохая идея.](https://medium.com/@robinpokorny/index-as-a-key-is-an-anti-pattern-e0349aece318#.76co046o9)
- `random()` не сработает

```javascript
//плохо
<MyComponent key={% raw %}{{ Math.random() }}{% endraw %} />
```

- Вы можете создавать свой уникальный id. Только проверьте, что метод генерации не тормозит ваше приложение.
- Когда элементов много или они содержат тяжелые компоненты, используйте ключи для улучшения производительности.
- [Вы должны указывать ключ для каждого дочернего элемента в ReactCSSTransitionGroup.](http://docs.reactjs-china.com/react/docs/animation.html)
